const axios = require("axios")
const https = require("https")
const uuid = require("uuid")

console.log("Configuring client...")

const certPem = `-----BEGIN CERTIFICATE-----
MIIFbTCCA1WgAwIBAgIQTvXFWqXkdaNhEIekiX8/EzANBgkqhkiG9w0BAQ0FADBr
MSkwJwYDVQQDDCBOb3JkZWEgQ3VzdG9tZXIgQ0ExIHYyIGZvciBTd2lzaDERMA8G
A1UEBRMITkRFQVNFU1MxHjAcBgNVBAoMFU5vcmRlYSBCYW5rIEFCIChwdWJsKTEL
MAkGA1UEBhMCU0UwHhcNMjIwNzIwMTQ0OTM0WhcNMjQwNzIwMTQ0OTM0WjA3MQsw
CQYDVQQGEwJTRTETMBEGA1UECgwKNTU2MDk5Nzk4MjETMBEGA1UEAwwKMTIzNDY3
OTMwNDCCAiIwDQYJKoZIhvcNAQEBBQADggIPADCCAgoCggIBAJmFOg+peO5W4r0f
dVHFS5vtbYzrDuaVOi3YhY7xcplZNjRVgJvRnYqUn69nZU55wIXiMuGMC+wXWKFC
WSRtYb2RWo7iJIjNN9xmj5RyBUCxdV1SXZGDnCJcXgN18OW3+wCUh+ajfwj8Sz8r
Dqs5Hgfmn+aaXJ6KRiwdKV2GZ60Iuuvyp7gMx9455v58KPOcesLGhKSJm6fNeIcp
LhyeePhZVnfRoi4oReNWc+M9Yh0J5w5Tv9VcEULlJcFwzyZK/k0q9EQVatESJwKi
mzviPlpRQdrchaUNrQbmvyzQfmwMhu1GB05M11d58mVygkHsfM4Drn0r/huBBcX9
Iaq03vL8NX4zXm/cTuZfrjRzYmsBwLIUeOAZx4kK7goDOvr+VSqMMJM90u9Fow2E
ZJ0GlOhHAHm7bc6hjQ4mav0Zs0zGe/hc8pmTLR2mUwyUFKv0DbrrKoOr8wwBPlVb
iLCVvWO7KVU48qLzJwD8QtEA99C2EDUaoW8cOC1NcAMgovx+osAv11gIh7HXtrsw
f95tpmmzIW5eodu3E4lqw9cXma8O0VEQgFzOIQq6nRGfeaiTwPscgTNXcWSBAr9b
Fbady1iG92+cdL5uuAu+IfWCLC+2Y5fPrB6U1RQWG2FHKxyYOLHxePIlg2Dqr6ow
fU8BIWmkW71eMWfXzNUk6r9qTXOpAgMBAAGjQTA/MBEGA1UdDgQKBAhC16oo18Jc
/jAVBgNVHSAEDjAMMAoGCCqFcIFtAQEBMBMGA1UdIwQMMAqACEI+A3SZ5AwHMA0G
CSqGSIb3DQEBDQUAA4ICAQAl2frHMXKApW05/G4a1VkFeCcm7Z7U1YU4kbV3v64u
D7UOaYloFaYAzbQHeZXVAiqXUxTezdie9ezOKnIuO9MO0NwKw8XJMzoP4DiLLllA
eKsxJ/2WQ5Um74QJ2T2KsVrc0vnoOjYitU4/p8DcgzMPLxDfX0V6DOb06OPdMYlv
OTBHTk6rekeyjBK8QwPBnt5yAHiNmQclIpxbncem5iRJQHLSYUK9YGy4B8Q/zEKt
qPaYchZeCDTWLvHlhcoRlkr9pscSstg0Y4d1yj8jleAOO8yfYWvvbmYv6EZwCkHS
a06mJGqcCTuVxSNA+q6+N7Na0XdYtvhgkMZoCrhBpwN82rXPmvOK2pqR7gIi043c
3FRQzUis29+a6eYlQgsmp+pJmo0ze1yGY0jgbA/4N5929nsdpByTIXPEywiZgZRu
8gFMBUPUObcf+2K5o+3mU7K2kh6QJuvuN/ItQtwPK+0TZtosuxhGqbvTmHFevURL
Q9qd8scrXGXgbWdJ1uiIL1nZlz3DCq5omp8aWuFJi5fR3JZojR8H+1paN05JYzmD
blubbvRWxt6fyihi80Su4UnzpHXO92gIX+XgT73M8XujshdIKmVAw6IUa2F4XSUP
rB9vNhScOrRXyXu5/q75eAYtfjdoSp5ms2+U+Zuy6lPuFotq7r4vCTgcrP92LCF3
DQ==
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIFvDCCA6SgAwIBAgIQYfNFLnypegBBXH6Nch5DeDANBgkqhkiG9w0BAQ0FADBm
MSQwIgYDVQQDDBtOb3JkZWEgUm9vdCBDQSB2MiBmb3IgU3dpc2gxETAPBgNVBAUT
CE5ERUFTRVNTMR4wHAYDVQQKDBVOb3JkZWEgQmFuayBBQiAocHVibCkxCzAJBgNV
BAYTAlNFMB4XDTE4MDQxMzEyMTI0NVoXDTI5MDQxMzExNTM1MVowazEpMCcGA1UE
AwwgTm9yZGVhIEN1c3RvbWVyIENBMSB2MiBmb3IgU3dpc2gxETAPBgNVBAUTCE5E
RUFTRVNTMR4wHAYDVQQKDBVOb3JkZWEgQmFuayBBQiAocHVibCkxCzAJBgNVBAYT
AlNFMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAtvtl8XnBkI55Fjw0
uTPs8e0iwSD8xUJKrhi4ZTgbW1dPDKIQ57jSrbQRyGQfLKkKxGHGvvKpoGNxKVhp
QStiX0QFshTMpM819J12fq52rQhus4PL7z1oiNdlR0zCK6fEWQ5dZpWzbIePjGC6
ZamtayHgwhHUQsQXJp7KCqcJYIFGUyqnrSBYXD6YWPCu7zPhC8VNbwcGmf1iMHHO
NooHiAOhpJOrvgqW5Zoh2ef89umtZjqaf8IxqSfKstLa1VIgeWTih+O3IwIPbZBz
CWX6DA2LVZELE5W09ankPY5KssILAAmlcp694d4xhBRVFBlo1hL8sydHvGnn9a8u
m9/Y8waCiuKk3tuy4KbY6b2Xsl3gpaGO8QbZfxchDrxmSJXQrRDZ1M4uoJVxqWDq
+glP/kBa2Wfxf7FBF458mGgCc0tg7djy03/9bHSp2HQmAxuNW9PRrQmFchRAJuDp
pX7v7p2vpb6ykYBDGi4Aq1FVmtd6bx/OlcD/A1LJQCpm5hpVFgjUe79f2bkFdQbZ
qxUwsIsRBNGFwzU8Ha7vlTbT95LoA4CD8ETQr8ODF/p78TUy5x0QGSq39Dp0f5l+
qd0weew7s5sZw4Kqj/Ug/8NKMVNzEVFJ4igSacObmrPg9iPkEHtSI1Wk3VuIuT2t
TwrOOE/FDUeV+xybXJQTaxWCZ58CAwEAAaNhMF8wDwYDVR0TAQH/BAUwAwEB/zAR
BgNVHQ4ECgQIQj4DdJnkDAcwFAYDVR0gBA0wCzAJBgcqhXCBbQEBMBMGA1UdIwQM
MAqACEiEuUYfNz3qMA4GA1UdDwEB/wQEAwIBBjANBgkqhkiG9w0BAQ0FAAOCAgEA
fssxl5NW62+SMH95et9SZeCXVNJ3p0VUAGIKVkPixpoyEyl/XzBUpKTulD31vklR
1oW7rXORTNmkNEQxNlsVI7Q0NYo3FdrvBmqCsp7+BgzYV/n6gd1k11oeASHO90Oh
JduYQQM1cpIbknh3EE+B40aS2PweP7VB0KhFqs0Oo1HX3XgtQLMp7XYywPUHqRB5
cA1SuY+RJRb9UyNFl1nGjt35zvH9hjp5+eRzpr8ixYBdMmviFidH4DSqYFTCupUZ
Hf/sMeZpBY1h5ezbJ+hy4AtxtOvgCBObxfjqfgwRmF2+vOSWi3UnY00Gru4RxDES
FNeWiMcvs9eXQvYs6aLfd5Ig6jqP1qXtWpvxRCaxkIS1ZbxK98MGiWvpl9MIMVxn
6iBT04KM414ucrl2UQktwIkozg8xI3v75Hmwp6f2NMCKVnCrBKoRJ7UzLUvn+1Xj
8XqTHTtNKHRF5pLEK7Fp0EMbWKLzNtr+egCkZ/FrEM0JDBqBfxm4wN2FbUJyyRFR
zKFAEIZo8lzVHB5JwCAm6fySAa5t0+7QVifPCitKjBsPOifd98H/y7C7r517mtH3
jFgbQhBDqSRmMJg0BeGjlyAh983dhKqdYcGBjXllJdVG660diOGQRqYygX8MQ6wt
8L2AqFkluK5FnZ+CjtA0dWwHNXZ4w/RtqIeQMbBX8l0=
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIFoTCCA4mgAwIBAgIQe0NQ6INMIiyugRazVbqIgjANBgkqhkiG9w0BAQ0FADBQ
MR4wHAYDVQQDDBVTd2lzaCBSb290IENBIHYyIFRlc3QxGDAWBgNVBAsMD1N3aXNo
IE1lbWJlciBDQTEUMBIGA1UECgwLR2V0c3dpc2ggQUIwHhcNMTgwNDEzMTE1MzUx
WhcNMjkwNDEzMTE1MzUxWjBmMSQwIgYDVQQDDBtOb3JkZWEgUm9vdCBDQSB2MiBm
b3IgU3dpc2gxETAPBgNVBAUTCE5ERUFTRVNTMR4wHAYDVQQKDBVOb3JkZWEgQmFu
ayBBQiAocHVibCkxCzAJBgNVBAYTAlNFMIICIjANBgkqhkiG9w0BAQEFAAOCAg8A
MIICCgKCAgEAwnyBbFdx3xBeGRpkK3zI5ASUYZ5ER/CrOp+kpxjQB0m9uvBirITR
qyhk40icNME8dy3JN1qdOuuG7NPiNRHaoBS2/4/v1fk+kktz5dcZIX+m18JAgiVw
agmaF2UXLxqX18BiWdszCMw4GvzUZL8DTtVMVj9By8S7rnhi61HAkYktmfEmm6/F
UXzp49EThSmtVrFrwZrJXvtArZjRFT92JM7K3TCjSfow0W6a/0EcHqSQA5ItWyHt
0llUlVh1kezjBH6zxQSWJA7G2+adFyKLaMJ2gPcZ0W5HO1AAK10WsWsysGqgYRvv
JzwX00WmUG6A2bPNdvAT+1i9oeV3tmXhM3EArWM8ZZgAv1jBlm7iIxZ8y0UQR47m
+YHqt8a3l6hX/RnaDD7Tyu5giTV6CoVT4mL76mdLxV24pqAp+6SC5GjrjLnbkHvC
SjtXfDT5Dq6dRDfSfk4hXHr3I30cPWDmBtBy6gYE/rpK20pM2yeJBi/z36gIrn2A
I75mEa4fXVti4o0t+KdRvJnMJAXe/sqcX4RjAum3apD0vYCN+tcDNIdDxV7KjbAU
0k7IzTW1wiDJRVz0+PbLZP/Sx8+lJBQN+KTU6U6eDy+r9ZszQA2iGaqkOTa0oizX
eoYhz1wsBCr5X8jEsEO68dzgDSbrvlLgmDFvioC8HxQwJxf4XS7UkDUCAwEAAaNh
MF8wDwYDVR0TAQH/BAUwAwEB/zARBgNVHQ4ECgQISIS5Rh83PeowFAYDVR0gBA0w
CzAJBgcqhXCBbQEBMBMGA1UdIwQMMAqACEqxL1U1jBlzMA4GA1UdDwEB/wQEAwIB
BjANBgkqhkiG9w0BAQ0FAAOCAgEAd5iHMuPFZwBX1HwukvWizO4bAFXFQedQxSiT
SA7ADEt2JZR+fXCokZ67Wao+YtwKr8yyW++1dgxiIyLlg5BPlaM0LIuH2NpbEaVL
tpeklOgRou8g7sssy8tReWEzgFU5n9zDynZFUStLaxgincTVJlyi96c3G7shupxi
FdfqtdazmSIQ+DFzXfXtVsOsE5GzPUvhmi+8pkKnR6cPlwqSRmfFxbWzxsa36ffP
LIRVUP1OmC30MvwMq3VpObajTkunPZPMYiNASEaR/hspxiPiw4SQi8SJYuBQT6Ky
KNoo78rknsCu6+L2hgPHomrvaLnrg4kq3idIbCYQk+V8378EUg5cZRca5vhPzMUA
Zn1AKfC+mMQi7VgL9NHHfHfgP11562C7dPMjweX61UwLEC7HRu21kA3A4TQs9e4E
nFLxPryJyh0X2kxwdknOyiCDqKGYHU44Ks1L6kouw7+8ugtBaCG3b3cijBasIuuT
Tk6U6Ce4YdaNzdEKvZ/zhRT6/EuJvBLVABdfFwP42Ji4S+XEo0+OIf/UcmFn4xCf
mNF6+h/sSJQBIQNhLnZ2tzhuBo4PlcBi4OSmn2rGxzxocH2Mg1YKUlKPnCpgILq5
ycm2x5j/lbQ00SUgX/a0qZDNtl+VgMaHANOytXGTj9vbCdQAslAymynrrzpFsh48
JSn319I=
-----END CERTIFICATE-----`

const keyPem = `-----BEGIN RSA PRIVATE KEY-----
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
-----END RSA PRIVATE KEY-----`

const swishClient = axios.create({
  httpsAgent: new https.Agent({
    cert: certPem,
    key: keyPem
  })
})

async function main() {
  const requestId = uuid.v4().replace(/-/g, "")
  console.log(`Performing request with id ${requestId}...`)
  const res = await swishClient({
    method: "PUT",
    url: `https://mss.cpc.getswish.net/swish-cpcapi/api/v2/paymentrequests/${requestId}`,
    data: {
      payeeAlias: "1234679304",
      amount: "100.00",
      currency: "SEK",
      callbackUrl: "https://vier.live",
      message: "VIERLIVE ticket"
    },
    validateStatus: () => true
  })

  console.log(res.status)
  console.log(res.data)
}

main()
